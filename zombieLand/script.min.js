!function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return r(i||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Field=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./script");function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}i.Field=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createCanvas(),this.buttonStyle()}return n(t,[{key:"createCanvas",value:function(){this.main=document.querySelector("main"),this.main.innerHTML='\n    <canvas id="field"></canvas>\n    <div id="buttons">\n      <div class="mobile up"></div>\n      <div class="mobile down"></div>\n      <div class="mobile left"></div>\n      <div class="mobile right"></div>\n    </div>\n    ',this.canvas=document.getElementById("field"),this.ctx=this.canvas.getContext("2d"),this.buttons=document.getElementById("buttons"),this.resize(),this.events()}},{key:"refresh",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"buttonStyle",value:function(){var t=this;this.blocks=document.querySelectorAll(".mobile"),this.blocks.forEach(function(e){e.classList.contains("up")&&(e.style.top="0",e.style.left=.3*t.width+"px",e.style.height=t.height/2+"px",e.style.width=.4*t.width+"px"),e.classList.contains("down")&&(e.style.top=t.height/2+"px",e.style.left=.3*t.width+"px",e.style.height=t.height/2+"px",e.style.width=.4*t.width+"px"),e.classList.contains("left")&&(e.style.top="0",e.style.left="0",e.style.height=t.height+"px",e.style.width=.3*t.width+"px"),e.classList.contains("right")&&(e.style.top="0",e.style.left=.7*t.width+"px",e.style.height=t.height+"px",e.style.width=.3*t.width+"px")})}},{key:"draw",value:function(t,e){var i,n,s=r.sprite.coords(t.name,t.direction,e);"zombie2"!==t.name?(i=this.ctx).drawImage.apply(i,o(s).concat([Math.round(t.x),Math.round(t.y),s[3],s[4]])):(this.ctx.fillStyle="rgba(255,255,255,0.1)",this.ctx.beginPath(),this.ctx.moveTo(t.x+t.width/2+t.zombieActionZone,t.y+t.height/2),this.ctx.arc(t.x+t.width/2,t.y+t.height/2,t.zombieActionZone,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.closePath(),(n=this.ctx).drawImage.apply(n,o(s).concat([Math.round(t.x),Math.round(t.y),s[3],s[4]])))}},{key:"forseIndicate",value:function(t){if(t){document.querySelector("#indicate").style.background="-webkit-linear-gradient(left, #f00 0%, #f00 "+(100-t)+"%, rgba(255, 0, 0, 0) "+(100-t)+"%, rgba(255, 0, 0, 0) 100%)"}else{var e=document.createElement("div");e.id="indicate",this.main.appendChild(e),e.style.top=this.height-20+"px"}}},{key:"resize",value:function(){this.width=this.canvas.width=document.documentElement.clientWidth,this.height=this.canvas.height=document.documentElement.clientHeight}},{key:"events",value:function(){window.addEventListener("resize",this.resize.bind(this))}}]),t}()},{"./script":7}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Game=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./script"),o=t("./hero"),s=t("./zombie1"),a=t("./zombie2"),h=t("./thing"),c=t("./message");i.Game=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.interval=e,this.all=[],this.tick=0}return n(t,[{key:"init",value:function(){this.all.push(new o.Hero(this.randomNumber(100,r.field.width-100),this.randomNumber(100,r.field.height-100),this.randomNumber(0,360),this.randomNumber(5,8),this.tick)),r.field.draw(this.all[0],this.tick),this.tick++,this.events()}},{key:"start",value:function(){var t=this;this.timer=setInterval(function(e){r.field.refresh(),t.addZombie(),t.addThing(),t.all.forEach(function(e,i,n){e.step&&e.step(),r.field.draw(e,t.tick,t.zombieActionZone),"thing"!==e.name&&"hero"!==e.name&&e.check(n[0],function(e){return t.stop()}),"thing"===e.name&&e.check(n[0]),"hero"===e.name&&e.check(null,r.field.forseIndicate)}),t.tick++},this.interval)}},{key:"events",value:function(){var t=this;document.addEventListener("keydown",function(e){if(!(e.keyCode<37&&e.keyCode>40)){if(!t.run)return t.start(),void(t.run="go");if("go"===t.run){var i=t.all[0];39===e.keyCode&&i.turn("right"),37===e.keyCode&&i.turn("left"),38===e.keyCode&&i.turn("up"),40===e.keyCode&&i.turn("down"),27===e.keyCode&&t.stop()}}}),r.field.buttons.addEventListener("mousedown",function(e){if(e.target.classList.contains("mobile")){if(e.preventDefault(),!t.run)return t.start(),void(t.run="go");var i=t.all[0];e.target.classList.contains("right")&&i.turn("right"),e.target.classList.contains("left")&&i.turn("left"),e.target.classList.contains("up")&&i.turn("up"),e.target.classList.contains("down")&&i.turn("down")}})}},{key:"stop",value:function(){this.run="stop",clearInterval(this.timer),new c.Message(this.tick*this.interval),r.result.addHistory(this.all,this.tick)}},{key:"replay",value:function(){var t=this;this.play=[],Promise.resolve().then(function(t){return r.result.local("game")}).then(function(e){t.total=e[0],e.shift();t.timer=setTimeout(function i(){r.field.refresh(),e.forEach(function(e){if(e.tick===t.tick){var i=e.history[0];"hero"===e.name&&t.play.push(new o.Hero(i.x,i.y,i.corner,i.speed,e.tick)),"zombie1"===e.name&&t.play.push(new s.Zombie1(i.x,i.y,i.corner,i.speed,e.tick)),"zombie2"===e.name&&t.play.push(new a.Zombie2(i.x,i.y,i.corner,i.speed,e.tick)),"thing"===e.name&&t.play.push(new h.Thing(i.x,i.y,e.tick)),e.history.shift(),t.play[t.play.length-1].replay=e.history}}),t.play.forEach(function(e){r.field.draw(e,t.tick,t.zombieActionZone),e.play()}),t.tick++,t.tick===t.total&&(clearInterval(t.timer),window.location.hash="history"),t.timer=setTimeout(i,t.interval)},t.interval)})}},{key:"addZombie",value:function(){var t=[this.checkRandomForHero(0,r.field.width,"x"),this.checkRandomForHero(0,r.field.height,"y"),this.randomNumber(0,360),this.randomNumber(1,5),this.tick];0!==this.tick&&this.tick%49==0&&this.all.push(new(Function.prototype.bind.apply(s.Zombie1,[null].concat(t)))),0!==this.tick&&this.tick%111==0&&this.all.push(new(Function.prototype.bind.apply(a.Zombie2,[null].concat(t))))}},{key:"addThing",value:function(){0!==this.tick&&this.tick%189==0&&this.all.push(new h.Thing(this.randomNumber(0,r.field.width),this.randomNumber(0,r.field.height),this.tick))}},{key:"randomNumber",value:function(t,e){return Math.round(t+Math.random()*(e-t))}},{key:"checkRandomForHero",value:function(t,e,i){var n=this.randomNumber(t,e);return"x"===i?n>this.all[0].x-100&&n<this.all[0].x+100?this.checkRandomForHero(t,e,"x"):n:"y"===i?n>this.all[0].y-100&&n<this.all[0].y+100?this.checkRandomForHero(t,e,"y"):n:void 0}}]),t}()},{"./hero":3,"./message":4,"./script":7,"./thing":10,"./zombie1":12,"./zombie2":13}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Hero=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./person"),o=t("./script");i.Hero=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)));return s.name="hero",s.force=!1,s.forceTime=1e4,s.width=o.sprite[s.name].spriteWidth,s.height=o.sprite[s.name].spriteHeight,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Person),n(e,[{key:"addForce",value:function(){var t=this;this.forse?(clearTimeout(this.forse),this.forse=setTimeout(function(e){t.forse=!1},this.forceTime)):this.forse=setTimeout(function(e){t.forse=!1},this.forceTime),this.stampDate=Date.now()}},{key:"check",value:function(t,e){this.forse&&e((Date.now()-this.stampDate)/this.forceTime*100)}},{key:"turn",value:function(t){"right"===t&&(this.corner<22.5||this.corner>337.5?this.corner=0:this.corner<=180&&this.corner>=22.5?this.corner-=22.5:this.corner+=22.5),"left"===t&&(this.corner<202.5&&this.corner>157.5?this.corner=180:this.corner>=0&&this.corner<202.5?this.corner+=22.5:this.corner-=22.5),"up"===t&&(this.corner<112.5&&this.corner>67.5?this.corner=90:this.corner>=0&&this.corner<=67.5||this.corner>270&&this.corner<=360?this.corner+=22.5:this.corner-=22.5),"down"===t&&(this.corner<292.5&&this.corner>247.5?this.corner=270:this.corner>=0&&this.corner<=90||this.corner>=292.5&&this.corner<360?this.corner-=22.5:this.corner+=22.5,this.corner<0&&(this.corner+=360))}}]),e}()},{"./person":5,"./script":7}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Message=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./script");i.Message=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=document.documentElement.clientWidth,this.height=document.documentElement.clientHeight,this.time=e,this.create()}return n(t,[{key:"create",value:function(){this.div=document.createElement("div"),this.div.id="cover",this.div.innerHTML='\n      <div id="message">\n        <p id="time">Your time: '+this.time/1e3+' s</p>\n        <input id="username" type="text">\n        <div>\n          <button>OK</button>\n          <button>Cancel</button>\n        </div>\n      </div>\n    ',this.div.classList.add("z2"),document.body.appendChild(this.div),this.div.style.top=0,this.div.style.left=0,this.div.style.height=this.height+"px",this.div.style.width=this.width+"px";var t=this.div.querySelector("#message"),e=t.getBoundingClientRect();t.style.top=this.height/2-e.height/2+"px",t.style.left=this.width/2-e.width/2+"px",this.events()}},{key:"events",value:function(){var t=this;this.input=this.div.querySelector("#username"),this.div.addEventListener("click",function(e){if(e.target.matches("button")){if("OK"===e.target.innerText){if(""===t.input.value)return;r.result.newResult({name:t.input.value,time:t.time})}"Cancel"===e.target.innerText&&(window.location.hash="history"),t.delete()}}),this.input.addEventListener("keypress",function(e){13===e.keyCode&&""!==t.input.value&&""!==t.input.value&&(r.result.newResult({name:t.input.value,time:t.time}),t.delete())})}},{key:"delete",value:function(){this.div.parentNode.removeChild(this.div)}}]),t}()},{"./script":7}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.Person=function(){function t(e,i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.size=40,this.corner=n,this.speed=r,this.tick=o,this.delete=!1,this.screenWidth=document.documentElement.clientWidth,this.screenHeight=document.documentElement.clientHeight,this.direction="down",this.writeHistory()}return n(t,[{key:"step",value:function(){if(this.delete)return this.x=-200,this.y=-200,void this.writeHistory();var t=this.speed*Math.cos(this.corner*Math.PI/180),e=-1*this.speed*Math.sin(this.corner*Math.PI/180);this.x+=t,this.y+=e,this.x>this.screenWidth&&(this.x=0-this.size),this.y>this.screenHeight&&(this.y=0-this.size),this.x+this.size<0&&(this.x=this.screenWidth),this.y+this.size<0&&(this.y=this.screenHeight),this.defineDirection(),this.writeHistory()}},{key:"play",value:function(){var t=this.replay[0];this.x=t.x,this.y=t.y,this.corner=t.corner,this.defineDirection(),this.replay.shift()}},{key:"defineDirection",value:function(){this.corner=Math.abs(this.corner),this.corner>360&&(this.corner=this.corner%360),(this.corner>=0&&this.corner<45||this.corner>=315&&this.corner<=360)&&(this.direction="right"),this.corner>=135&&this.corner<225&&(this.direction="left"),this.corner>=45&&this.corner<135&&(this.direction="up"),this.corner>=225&&this.corner<315&&(this.direction="down")}},{key:"writeHistory",value:function(){this.history||(this.history=[]),this.history.push({x:this.x,y:this.y,corner:this.corner,speed:this.speed})}}]),t}()},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.Router=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.route=e}return n(t,[{key:"interpret",value:function(t){var e=void 0;return this.route.forEach(function(i){"string"==typeof i.match&&i.match===t&&(e=i),"object"==typeof i.match&&i.match instanceof RegExp&&null!==t.match(i.match)&&(i.param=t.match(i.match),e=i),"function"==typeof i.match&&i.match(t)&&(i.param=t,e=i)}),e}},{key:"change",value:function(t,e){var i=this.interpret(t);i||(console.error("interpret(oldHash) didn't find iroute!"),i=this.interpret("")),"function"==typeof i.onLeave&&Promise.resolve(i.param).then(i.onLeave),(i=this.interpret(e))||(console.error("interpret(newHash) didn't find iroute!"),i=this.interpret("")),"function"==typeof i.onEnter&&Promise.resolve(i.param).then(i.onEnter),"function"==typeof i.onBefore&&Promise.resolve(i.param).then(i.onBefore)}},{key:"start",value:function(){var t=this;window.addEventListener("hashchange",function(e){var i=e.oldURL.match(/#(.+)/),n=e.newURL.match(/#(.+)/);i=null!==i?i[1]:"",n=null!==n?n[1]:"",t.change.call(t,i,n)}),this.change("",window.location.hash.slice(1))}}]),t}()},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.promises=i.sprite=i.result=i.game=i.field=void 0;var n=t("./field"),r=t("./sprite"),o=t("./game"),s=t("./winners"),a=t("./router"),h=t("./table"),c=void 0,u=void 0,l=void 0,d=void 0,f=void 0,p=void 0,y=void 0;i.field=c,i.game=u,i.result=p,i.sprite=f,i.promises=y,l=document.querySelector("header"),d=document.querySelector("main"),i.promises=y=[],i.result=p=new s.Result,i.sprite=f=new r.Sprite,f.add("hero","./other/hero.png",9,4),f.add("zombie1","./other/zombie1.png",9,4),f.add("zombie2","./other/zombie2.png",9,4),f.add("thing","./other/fruit.png",8,5),Promise.all(y).then(function(t){new a.Router(m).start()});var m=[{name:"index",match:function(t){return""===t},onEnter:function(){window.location.hash="main"}},{name:"main",match:"main",onEnter:function(){d.innerHTML='\n      <div id="describtion">\n        <h2>Аркадная игра "ZombieLand"!</h2>\n        <p>Web-приложение имеет 3 вкладки:</p>\n        <ul>\n          <li>описание приложения и правил игры ("Main");</li>\n          <li>поле игры ("Game");</li>\n          <li>история побед ("History");</li>\n        </ul>\n        <p>Управление игрой производится с помощью стрелок или нажатие на соответственные стороны сенсорного экрана, при его наличии. При первом нажатии на клавиши управления - происходит старт игры запускается.</p>\n        <p>Цель игры - не быть съеденным коварными зомби! При контакте з зомби - игра заканчивается, но на поле игры время от времени появляются фрукты, подбирая которые, Вы легко можете справится с любым зомби, индикатор активности находится в нижней левой части экрана. Для остановки и выхода во время игры можете нажать "ESC". </p>\n        <p>При завершении игры - появляется диалоговое окно, требующее Ваше имя, для сохранения результата в историю побед. Также в историю сохраняется лучшая игра, просмотреть которую Вы можете, нажав на кнопку "Play" напротив результата лидера игры.</p>\n        <p>Дерзайте! И удачной Вам игры!</p>\n      </div>'},onLeave:function(){d.innerHTML=""}},{name:"game",match:"game",onEnter:function(){i.field=c=new n.Field,c.forseIndicate(),i.game=u=new o.Game(50,100,9),u.init(),l.classList.add("hide")},onLeave:function(){l.classList.remove("hide"),clearInterval(u.timer),d.innerHTML="",i.game=u=null,i.field=c=null}},{name:"history",match:"history",onEnter:function(){new h.Table(p.winners,function(t){window.location.hash="play"})},onLeave:function(){null,d.innerHTML=""}},{name:"play",match:"play",onEnter:function(){i.field=c=new n.Field,i.game=u=new o.Game(50,100,9),p.addSlider(u.interval),u.replay(),l.classList.add("hide")},onLeave:function(){l.classList.remove("hide"),clearInterval(u.timer),d.innerHTML="",i.game=u=null,i.field=c=null}}]},{"./field":1,"./game":2,"./router":6,"./sprite":8,"./table":9,"./winners":11}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Sprite=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./script");i.Sprite=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"add",value:function(t,e,i,n){var o=this;r.promises.push(new Promise(function(r,s){o[t]={img:new Image,amount:i,position:n},o[t].img.src=e,o[t].img.onload=function(e){o[t].width=e.target.width,o[t].height=e.target.height,o[t].spriteWidth=e.target.width/i,o[t].spriteHeight=e.target.height/o[t].position,r()}}))}},{key:"coords",value:function(t,e,i){if(void 0===e&&void 0===i)return[this[t].spriteWidth,this[t].spriteHeight];var n=i%this[t].amount*this[t].spriteWidth,r=void 0;return"none"===e&&(r=0,n=3*this[t].spriteWidth),"up"!==e&&"none"!==e||(r=0),"left"===e&&(r=this[t].spriteHeight),"down"===e&&(r=2*this[t].spriteHeight),"right"===e&&(r=3*this[t].spriteHeight),[this[t].img,n,r,this[t].spriteWidth,this[t].spriteHeight]}}]),t}()},{"./script":7}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.Table=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.list=e,this.play=i,this.create()}return n(t,[{key:"create",value:function(){var t=document.querySelector("main");t.innerHTML='\n    <table id="winners">\n      <thead>\n        <tr>\n          <th colspan="2">Best results</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr></tr>\n      </tbody>\n    </table>',this.table=t.querySelector("table");var e="";this.list.forEach(function(t,i){e+=0===i?"<tr><td>"+t.name+"</td><td>"+Math.round(t.time/1e3)+' s</td><td id="click">&#9658;</td></tr>':"<tr><td>"+t.name+"</td><td>"+Math.round(t.time/1e3)+" s</td></tr>"}),t.querySelector("tbody").innerHTML=e;var i=this.table.querySelector("#click");null!==i&&(i.onclick=this.play)}}]),t}()},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Thing=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./script");i.Thing=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="thing",this.x=e,this.y=i,this.zone=20,this.tick=n,this.direction="none",this.delete=!1,this.width=r.sprite[this.name].spriteWidth,this.height=r.sprite[this.name].spriteHeight}return n(t,[{key:"play",value:function(){var t=this.replay[0];this.x=t.x,this.y=t.y,this.replay.shift()}},{key:"step",value:function(){this.delete&&(this.x=-100,this.y=-100),this.writeHistory()}},{key:"writeHistory",value:function(){this.history||(this.history=[]),this.history.push({x:this.x,y:this.y})}},{key:"check",value:function(t){Math.abs(this.x+this.width/2-(t.x+t.width/2))<this.zone&&Math.abs(this.y+this.height/2-(t.y+t.height/2))<this.zone&&(this.delete=!0,t.addForce())}}]),t}()},{"./script":7}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Result=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./script");i.Result=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.local("winners").then(function(t){e.winners=null===t?[]:t})}return n(t,[{key:"newResult",value:function(t){var e=this;Promise.resolve().then(function(t){return e.local("winners")}).then(function(i){e.winners=null===i?[]:i,e.winners.push(t),e.winners.sort(function(t,e){return e.time-t.time}),window.location.hash="history",t===e.winners[0]&&e.local("game",e.history),e.local("winners",e.winners)})}},{key:"addHistory",value:function(t,e){this.history=[];var i=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var a=o.value;this.history.push({name:a.name,history:a.history,tick:a.tick})}}catch(t){n=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw r}}return this.history.unshift(e),this.history}},{key:"local",value:function(t,e){if(t&&e){var i=JSON.stringify(e);Promise.resolve().then(function(e){window.localStorage.setItem(t,i)})}if(!e&&t)return Promise.resolve().then(function(e){return JSON.parse(window.localStorage.getItem(t))})}},{key:"addSlider",value:function(t){var e=document.querySelector("main"),i=document.createElement("div");i.className="slider",i.innerHTML='<input id="slider" type="range" min="5" max="100">',e.appendChild(i),i.children[0].addEventListener("input",function(t){r.game.interval=105-t.target.value})}}]),t}()},{"./script":7}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Zombie1=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./person"),o=t("./script");i.Zombie1=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)));return s.name="zombie1",s.zone=25,s.width=o.sprite[s.name].spriteWidth,s.height=o.sprite[s.name].spriteHeight,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Person),n(e,[{key:"check",value:function(t,e){Math.abs(this.x+this.width/2-(t.x+t.width/2))<this.zone&&Math.abs(this.y+this.height/2-(t.y+t.height/2))<this.zone&&(t.forse?this.delete=!0:e())}}]),e}()},{"./person":5,"./script":7}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Zombie2=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./person"),o=t("./script");i.Zombie2=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)));return s.name="zombie2",s.oldSpeed=s.speed,s.zone=25,s.zombieActionZone=150,s.width=o.sprite[s.name].spriteWidth,s.height=o.sprite[s.name].spriteHeight,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Person),n(e,[{key:"check",value:function(t,e){var i=this.x+this.width/2-(t.x+t.width/2),n=this.y+this.height/2-(t.y+t.height/2);Math.sqrt(Math.abs(i)*Math.abs(i)+Math.abs(n)*Math.abs(n))<this.zombieActionZone&&!this.turbo?(this.turbo=!0,this.corner=this.getCornerByPoints(this.x+this.width/2,t.x+t.width/2,this.y+this.height/2,t.y+t.height/2),this.speed=.75*t.speed):(this.turbo=!1,this.speed=this.oldSpeed),Math.abs(i)<this.zone&&Math.abs(n)<this.zone&&(t.forse?this.delete=!0:e())}},{key:"getCornerByPoints",value:function(t,e,i,n){var r=void 0,o=t-e,s=i-n,a=Math.abs(180*Math.atan(s/o)/Math.PI);return o<=0&&s>=0&&(r=a),o>0&&s>=0&&(r=180-a),o>=0&&s<0&&(r=180+a),o<0&&s<0&&(r=360-a),r}}]),e}()},{"./person":5,"./script":7}]},{},[7]);